# Playwright E2E Tests

This repository contains end-to-end (E2E) tests for UI and API functionalities using [Playwright](https://playwright.dev/). The project is structured to test a demo e-commerce application [DemoBlaze](https://demoblaze.com/), covering User purchase flow e2e, API tests using [gorest](https://gorest.co.in/).

## Project Structure

```
playwright-e2e-tests/
├── .env                     # Environment variables for running locally, you can add file
├── .gitignore               # Git ignore file
├── package.json             # Project dependencies and scripts
├── playwright.config.ts     # Playwright configuration
├── README.md                # Project documentation
├── .github/                 # GitHub Actions workflows
│   └── workflows/
│       └── playwright.yml   # CI/CD workflow for Playwright tests
├── fixtures/                # Test data for UI and API tests
│   ├── productData.ts
│   └── testData.ts
├── helpers/                 # Utility functions for tests
│   ├── token.ts
│   ├── types.ts
│   ├── UI.ts
│   └── userAPI.ts
├── playwright-report/       # Test reports generated by Playwright
├── test-results/            # Test result artifacts
├── tests/                   # Test cases
│   ├── API/                 # API test cases
│   │   └── users.spec.ts
│   └── UI/                  # UI test cases
│       ├── pages/           # Page Object Model (POM) classes
│       │   ├── BasePage.ts
│       │   ├── CartPage.ts
│       │   ├── CategoryPage.ts
│       │   ├── CheckoutPage.ts
│       │   ├── HomePage.ts
│       │   ├── LoginPage.ts
│       │   ├── ProductPage.ts
│       │   └── index.ts
│       └── UI-tests/        # End-to-end UI test cases
│           └── e2e-tests.spec.ts
```

## Prerequisites

- Node.js (LTS version recommended)
- npm
- Playwright browsers (installed automatically)

## Installation

1. Clone the repository:
   ```bash
   git clone <repository-url>
   cd playwright-e2e-tests
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

3. Set up environment variables:
   Create a `.env` file in the root directory and add the following:
   ```
   API_TOKEN=<your_api_token>
   ```

## Running Tests

### Run All Tests
```bash
npm test
```

### Run UI Tests
```bash
npm run test:UI
```

### Run API Tests
```bash
npm run test:API
```

### Run Smoke Tests
```bash
npm run test:smoke
```

### Run Regression Tests
```bash
npm run test:regression
```

## Test Reports

- After running tests, an HTML report is generated in the `playwright-report/` directory.
- To view the report, open `playwright-report/index.html` in a browser.

## Test Strategy

The testing strategy for this project is designed to ensure comprehensive coverage of both UI and API functionalities. The tests are categorized into **positive** and **negative** scenarios to validate the application's behavior under various conditions.

### UI Tests

#### Positive Tests
- Validate the purchase journey without login.
- Verify cart total matches the sum of item prices.
- Ensure successful login and logout flows.
- Retain cart items after re-login.
- Validate the checkout process with valid data.

#### Negative Tests
- Attempt to place an order with an empty form and verify error messages.
- Test invalid input formats for fields like name and card number.
- Ensure cart is empty after logout and re-login when no items are added.

### API Tests

#### Positive Tests
- Create a new user with valid data.
- Retrieve user details using a valid token.
- Update user information with valid inputs.
- Delete a user successfully.

#### Negative Tests
- Attempt to create a user with missing or invalid fields.
- Access user details with an invalid or expired token.
- Update user information with invalid data formats.
- Delete a non-existent user and verify the error response.

## Potential Bugs and Observations

The following issues were identified during testing and should be addressed to improve the application's functionality and user experience:

1. **Checkout on Empty Cart**  
   - **Issue**: Users are allowed to proceed to checkout with an empty cart.  
   - **Expected Behavior**: The checkout button should be disabled until at least one item is added to the cart.

2. **Invalid Name and Credit Card Format**  
   - **Issue**: The application allows invalid formats for required fields such as name and credit card number during checkout.  
   - **Expected Behavior**: Proper validation should be implemented to ensure that these fields follow the correct format.

3. **State Persistence for Logged-In Users**  
   - **Issue**: The state of logged-in users is not cleared on certain pages (e.g., `cart.html`), leading to inconsistent behavior.  
   - **Expected Behavior**: The application should ensure that the user's state is properly cleared when logging out or navigating to specific pages.

## CI/CD Integration

This project uses GitHub Actions for CI/CD. The workflow is defined in `.github/workflows/playwright.yml`. It runs both UI and API tests on every push or pull request to the `master` branch.

## Key Features

### UI Tests
- Implements the Page Object Model (POM) design pattern.
- Covers end-to-end purchase flow, login/logout, and cart management.

### API Tests
- CRUD operations for user management.
- Negative test cases for invalid tokens, missing fields, and invalid data.

### Utilities
- `helpers/UI.ts`: Utility functions for UI interactions.
- `helpers/userAPI.ts`: Helper functions for API requests.
- `fixtures/`: Test data for both UI and API tests.